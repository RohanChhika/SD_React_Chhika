{"ast":null,"code":"import React,{useEffect}from\"react\";import{useAuth0}from\"@auth0/auth0-react\";import{jsx as _jsx}from\"react/jsx-runtime\";const LoginButton=()=>{const{loginWithRedirect,isAuthenticated,user,getAccessTokenSilently}=useAuth0();useEffect(()=>{const addUserToDatabase=async()=>{if(!user)return;// Only proceed if the user is defined\ntry{const token=await getAccessTokenSilently();const response=await fetch('https://fundit.azurewebsites.net/signup',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({userID:user.sub,// Auth0 user identifier\nrole:'applicant',contact:user.email// User email from Auth0\n})});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}console.log('User added to the database successfully.');}catch(error){console.error('Failed to add user to the database:',error);}};if(isAuthenticated){addUserToDatabase();}},[isAuthenticated,user,getAccessTokenSilently]);return!isAuthenticated&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>loginWithRedirect(),children:\"Log In\"});};export default LoginButton;","map":{"version":3,"names":["React","useEffect","useAuth0","jsx","_jsx","LoginButton","loginWithRedirect","isAuthenticated","user","getAccessTokenSilently","addUserToDatabase","token","response","fetch","method","headers","concat","body","JSON","stringify","userID","sub","role","contact","email","ok","Error","status","console","log","error","onClick","children"],"sources":["C:/Users/Rohan/Documents/Sofware Design/Project/SD_React_Chhika/src/components/LoginButton.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\n\r\nconst LoginButton = () => {\r\n  const { loginWithRedirect, isAuthenticated, user, getAccessTokenSilently } = useAuth0();\r\n\r\n  useEffect(() => {\r\n    const addUserToDatabase = async () => {\r\n      if (!user) return; // Only proceed if the user is defined\r\n\r\n      try {\r\n        const token = await getAccessTokenSilently();\r\n        const response = await fetch('https://fundit.azurewebsites.net/signup', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          body: JSON.stringify({\r\n            userID: user.sub, // Auth0 user identifier\r\n            role: 'applicant',\r\n            contact: user.email // User email from Auth0\r\n          })\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        console.log('User added to the database successfully.');\r\n      } catch (error) {\r\n        console.error('Failed to add user to the database:', error);\r\n      }\r\n    };\r\n\r\n    if (isAuthenticated) {\r\n      addUserToDatabase();\r\n    }\r\n  }, [isAuthenticated, user, getAccessTokenSilently]);\r\n\r\n  return !isAuthenticated && (\r\n    <button onClick={() => loginWithRedirect()}>\r\n      Log In\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default LoginButton;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,QAAQ,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9C,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAEC,iBAAiB,CAAEC,eAAe,CAAEC,IAAI,CAAEC,sBAAuB,CAAC,CAAGP,QAAQ,CAAC,CAAC,CAEvFD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAS,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CAACF,IAAI,CAAE,OAAQ;AAEnB,GAAI,CACF,KAAM,CAAAG,KAAK,CAAG,KAAM,CAAAF,sBAAsB,CAAC,CAAC,CAC5C,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,yCAAyC,CAAE,CACtEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYL,KAAK,CAClC,CAAC,CACDM,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,MAAM,CAAEZ,IAAI,CAACa,GAAG,CAAE;AAClBC,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAEf,IAAI,CAACgB,KAAM;AACtB,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACZ,QAAQ,CAACa,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,wBAAAV,MAAA,CAAwBJ,QAAQ,CAACe,MAAM,CAAE,CAAC,CAC3D,CAEAC,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACzD,CAAE,MAAOC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,CAC7D,CACF,CAAC,CAED,GAAIvB,eAAe,CAAE,CACnBG,iBAAiB,CAAC,CAAC,CACrB,CACF,CAAC,CAAE,CAACH,eAAe,CAAEC,IAAI,CAAEC,sBAAsB,CAAC,CAAC,CAEnD,MAAO,CAACF,eAAe,eACrBH,IAAA,WAAQ2B,OAAO,CAAEA,CAAA,GAAMzB,iBAAiB,CAAC,CAAE,CAAA0B,QAAA,CAAC,QAE5C,CAAQ,CACT,CACH,CAAC,CAED,cAAe,CAAA3B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}